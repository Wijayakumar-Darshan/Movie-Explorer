{"ast":null,"code":"// src/context/MovieContext.jsx\nimport React,{createContext,useContext,useEffect,useState}from'react';import{useAuth}from'./AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";const MovieContext=/*#__PURE__*/createContext();export const useMovie=()=>useContext(MovieContext);export const MovieProvider=_ref=>{let{children}=_ref;const{currentUser}=useAuth();const[movies,setMovies]=useState([]);const[favorites,setFavorites]=useState([]);// Load favorites for the logged-in user\nuseEffect(()=>{if(currentUser){const stored=JSON.parse(localStorage.getItem('userFavorites'))||{};setFavorites(stored[currentUser.email]||[]);}else{setFavorites([]);}},[currentUser]);// Save favorites for the current user\nconst saveFavorites=updated=>{const allFavs=JSON.parse(localStorage.getItem('userFavorites'))||{};allFavs[currentUser.email]=updated;localStorage.setItem('userFavorites',JSON.stringify(allFavs));};const toggleFavorite=movie=>{if(!currentUser){alert('You must be logged in to add favorites.');return;}let updated;if(favorites.some(m=>m.id===movie.id)){updated=favorites.filter(m=>m.id!==movie.id);}else{updated=[...favorites,movie];}setFavorites(updated);saveFavorites(updated);};return/*#__PURE__*/_jsx(MovieContext.Provider,{value:{movies,setMovies,favorites,toggleFavorite},children:children});};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","useAuth","jsx","_jsx","MovieContext","useMovie","MovieProvider","_ref","children","currentUser","movies","setMovies","favorites","setFavorites","stored","JSON","parse","localStorage","getItem","email","saveFavorites","updated","allFavs","setItem","stringify","toggleFavorite","movie","alert","some","m","id","filter","Provider","value"],"sources":["C:/Users/DARSHAN/Documents/Movie Explorer/movie-explorer/src/context/MovieContext.jsx"],"sourcesContent":["// src/context/MovieContext.jsx\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst MovieContext = createContext();\r\n\r\nexport const useMovie = () => useContext(MovieContext);\r\n\r\nexport const MovieProvider = ({ children }) => {\r\n  const { currentUser } = useAuth();\r\n  const [movies, setMovies] = useState([]);\r\n  const [favorites, setFavorites] = useState([]);\r\n\r\n  // Load favorites for the logged-in user\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      const stored = JSON.parse(localStorage.getItem('userFavorites')) || {};\r\n      setFavorites(stored[currentUser.email] || []);\r\n    } else {\r\n      setFavorites([]);\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // Save favorites for the current user\r\n  const saveFavorites = (updated) => {\r\n    const allFavs = JSON.parse(localStorage.getItem('userFavorites')) || {};\r\n    allFavs[currentUser.email] = updated;\r\n    localStorage.setItem('userFavorites', JSON.stringify(allFavs));\r\n  };\r\n\r\n  const toggleFavorite = (movie) => {\r\n    if (!currentUser) {\r\n      alert('You must be logged in to add favorites.');\r\n      return;\r\n    }\r\n\r\n    let updated;\r\n    if (favorites.some(m => m.id === movie.id)) {\r\n      updated = favorites.filter(m => m.id !== movie.id);\r\n    } else {\r\n      updated = [...favorites, movie];\r\n    }\r\n\r\n    setFavorites(updated);\r\n    saveFavorites(updated);\r\n  };\r\n\r\n  return (\r\n    <MovieContext.Provider value={{ movies, setMovies, favorites, toggleFavorite }}>\r\n      {children}\r\n    </MovieContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC7E,OAASC,OAAO,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExC,KAAM,CAAAC,YAAY,cAAGP,aAAa,CAAC,CAAC,CAEpC,MAAO,MAAM,CAAAQ,QAAQ,CAAGA,CAAA,GAAMP,UAAU,CAACM,YAAY,CAAC,CAEtD,MAAO,MAAM,CAAAE,aAAa,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACxC,KAAM,CAAEE,WAAY,CAAC,CAAGR,OAAO,CAAC,CAAC,CACjC,KAAM,CAACS,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACY,SAAS,CAAEC,YAAY,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAE9C;AACAD,SAAS,CAAC,IAAM,CACd,GAAIU,WAAW,CAAE,CACf,KAAM,CAAAK,MAAM,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAAC,EAAI,CAAC,CAAC,CACtEL,YAAY,CAACC,MAAM,CAACL,WAAW,CAACU,KAAK,CAAC,EAAI,EAAE,CAAC,CAC/C,CAAC,IAAM,CACLN,YAAY,CAAC,EAAE,CAAC,CAClB,CACF,CAAC,CAAE,CAACJ,WAAW,CAAC,CAAC,CAEjB;AACA,KAAM,CAAAW,aAAa,CAAIC,OAAO,EAAK,CACjC,KAAM,CAAAC,OAAO,CAAGP,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAAC,EAAI,CAAC,CAAC,CACvEI,OAAO,CAACb,WAAW,CAACU,KAAK,CAAC,CAAGE,OAAO,CACpCJ,YAAY,CAACM,OAAO,CAAC,eAAe,CAAER,IAAI,CAACS,SAAS,CAACF,OAAO,CAAC,CAAC,CAChE,CAAC,CAED,KAAM,CAAAG,cAAc,CAAIC,KAAK,EAAK,CAChC,GAAI,CAACjB,WAAW,CAAE,CAChBkB,KAAK,CAAC,yCAAyC,CAAC,CAChD,OACF,CAEA,GAAI,CAAAN,OAAO,CACX,GAAIT,SAAS,CAACgB,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACC,EAAE,GAAKJ,KAAK,CAACI,EAAE,CAAC,CAAE,CAC1CT,OAAO,CAAGT,SAAS,CAACmB,MAAM,CAACF,CAAC,EAAIA,CAAC,CAACC,EAAE,GAAKJ,KAAK,CAACI,EAAE,CAAC,CACpD,CAAC,IAAM,CACLT,OAAO,CAAG,CAAC,GAAGT,SAAS,CAAEc,KAAK,CAAC,CACjC,CAEAb,YAAY,CAACQ,OAAO,CAAC,CACrBD,aAAa,CAACC,OAAO,CAAC,CACxB,CAAC,CAED,mBACElB,IAAA,CAACC,YAAY,CAAC4B,QAAQ,EAACC,KAAK,CAAE,CAAEvB,MAAM,CAAEC,SAAS,CAAEC,SAAS,CAAEa,cAAe,CAAE,CAAAjB,QAAA,CAC5EA,QAAQ,CACY,CAAC,CAE5B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}