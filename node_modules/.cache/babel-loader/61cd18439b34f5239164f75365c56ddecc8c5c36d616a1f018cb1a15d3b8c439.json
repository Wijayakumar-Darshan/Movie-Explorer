{"ast":null,"code":"// src/context/AuthContext.jsx\nimport React,{createContext,useContext,useState,useEffect}from'react';import{loadFromLocalStorage,saveToLocalStorage,removeFromLocalStorage}from'../utils/localStorageHelpers';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[currentUser,setCurrentUser]=useState(null);useEffect(()=>{const storedUser=loadFromLocalStorage('authUser');if(storedUser){setCurrentUser(storedUser);}},[]);const login=async function(email,password){let rememberMe=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const users=loadFromLocalStorage('users')||[];const user=users.find(u=>u.email.toLowerCase().trim()===email.toLowerCase().trim()&&u.password===password);if(user){saveToLocalStorage('authUser',user);setCurrentUser(user);return{success:true};}return{success:false,message:'Invalid email or password'};};const signup=async(username,email,password)=>{const users=loadFromLocalStorage('users')||[];const userExists=users.some(u=>u.email.toLowerCase()===email.toLowerCase());if(userExists){return{success:false,message:'Email already in use'};}const newUser={username,email,password};const updatedUsers=[...users,newUser];saveToLocalStorage('users',updatedUsers);return{success:true};};const logout=()=>{removeFromLocalStorage('authUser');setCurrentUser(null);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{currentUser,isAuthenticated:!!currentUser,userName:(currentUser===null||currentUser===void 0?void 0:currentUser.username)||(currentUser===null||currentUser===void 0?void 0:currentUser.email)||'User',login,logout,signup},children:children});};export const useAuth=()=>useContext(AuthContext);","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","loadFromLocalStorage","saveToLocalStorage","removeFromLocalStorage","jsx","_jsx","AuthContext","AuthProvider","_ref","children","currentUser","setCurrentUser","storedUser","login","email","password","rememberMe","arguments","length","undefined","users","user","find","u","toLowerCase","trim","success","message","signup","username","userExists","some","newUser","updatedUsers","logout","Provider","value","isAuthenticated","userName","useAuth"],"sources":["C:/Users/DARSHAN/Documents/Movie Explorer/movie-explorer/src/context/AuthContext.js"],"sourcesContent":["// src/context/AuthContext.jsx\r\nimport React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport {\r\n  loadFromLocalStorage,\r\n  saveToLocalStorage,\r\n  removeFromLocalStorage,\r\n} from '../utils/localStorageHelpers';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const storedUser = loadFromLocalStorage('authUser');\r\n    if (storedUser) {\r\n      setCurrentUser(storedUser);\r\n    }\r\n  }, []);\r\n\r\n  const login = async (email, password, rememberMe = false) => {\r\n    const users = loadFromLocalStorage('users') || [];\r\n\r\n    const user = users.find(\r\n      (u) =>\r\n        u.email.toLowerCase().trim() === email.toLowerCase().trim() &&\r\n        u.password === password\r\n    );\r\n\r\n    if (user) {\r\n      saveToLocalStorage('authUser', user);\r\n      setCurrentUser(user);\r\n      return { success: true };\r\n    }\r\n\r\n    return { success: false, message: 'Invalid email or password' };\r\n  };\r\n\r\n  const signup = async (username, email, password) => {\r\n    const users = loadFromLocalStorage('users') || [];\r\n\r\n    const userExists = users.some(\r\n      (u) => u.email.toLowerCase() === email.toLowerCase()\r\n    );\r\n\r\n    if (userExists) {\r\n      return { success: false, message: 'Email already in use' };\r\n    }\r\n\r\n    const newUser = { username, email, password };\r\n    const updatedUsers = [...users, newUser];\r\n\r\n    saveToLocalStorage('users', updatedUsers);\r\n    return { success: true };\r\n  };\r\n\r\n  const logout = () => {\r\n    removeFromLocalStorage('authUser');\r\n    setCurrentUser(null);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        currentUser,\r\n        isAuthenticated: !!currentUser,\r\n        userName: currentUser?.username || currentUser?.email || 'User',\r\n        login,\r\n        logout,\r\n        signup,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}