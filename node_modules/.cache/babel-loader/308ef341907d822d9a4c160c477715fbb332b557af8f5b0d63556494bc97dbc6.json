{"ast":null,"code":"// src/pages/Home.jsx\nimport React,{useEffect,useState}from'react';import{Grid,Typography,Button,Box}from'@mui/material';import{useNavigate}from'react-router-dom';import SearchBar from'../components/SearchBar';import FilterBar from'../components/FilterBar';import MovieCard from'../components/MovieCard';import{useMovie}from'../context/MovieContext';import{useAuth}from'../context/AuthContext';import tmdb from'../api/tmdb';import'../styles/Home.css';// Import external CSS\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){const{movies,setMovies}=useMovie();const{isAuthenticated,userName,logout}=useAuth();const navigate=useNavigate();const[filteredMovies,setFilteredMovies]=useState([]);const[selectedGenre,setSelectedGenre]=useState('');useEffect(()=>{const fetchTrending=async()=>{try{const res=await tmdb.get('/trending/movie/week');setMovies(res.data.results);setFilteredMovies(res.data.results);}catch(err){console.error('Failed to fetch trending movies:',err);}};fetchTrending();},[setMovies]);useEffect(()=>{if(!selectedGenre){setFilteredMovies(movies);}else{setFilteredMovies(movies.filter(movie=>movie.genre_ids.includes(Number(selectedGenre))));}},[selectedGenre,movies]);const handleLogout=()=>{logout();navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(Typography,{className:\"home-title\",variant:\"h4\",children:\"Trending Movies\"}),isAuthenticated?/*#__PURE__*/_jsxs(Box,{className:\"user-info-bar\",children:[/*#__PURE__*/_jsxs(Typography,{className:\"username\",variant:\"h6\",children:[\"Welcome, \",userName,\"!\"]}),/*#__PURE__*/_jsx(Button,{className:\"logout-button\",onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(Box,{className:\"auth-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>navigate('/login'),children:\"Login\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigate('/register'),children:\"Sign Up\"})]}),/*#__PURE__*/_jsx(SearchBar,{}),/*#__PURE__*/_jsx(FilterBar,{onFilterChange:setSelectedGenre}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:filteredMovies.map(movie=>/*#__PURE__*/_jsx(MovieCard,{movie:movie},movie.id))})]});}","map":{"version":3,"names":["React","useEffect","useState","Grid","Typography","Button","Box","useNavigate","SearchBar","FilterBar","MovieCard","useMovie","useAuth","tmdb","jsx","_jsx","jsxs","_jsxs","Home","movies","setMovies","isAuthenticated","userName","logout","navigate","filteredMovies","setFilteredMovies","selectedGenre","setSelectedGenre","fetchTrending","res","get","data","results","err","console","error","filter","movie","genre_ids","includes","Number","handleLogout","className","children","variant","onClick","onFilterChange","container","spacing","map","id"],"sources":["C:/Users/DARSHAN/Documents/Movie Explorer/movie-explorer/src/pages/Home.jsx"],"sourcesContent":["// src/pages/Home.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Grid, Typography, Button, Box } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport SearchBar from '../components/SearchBar';\r\nimport FilterBar from '../components/FilterBar';\r\nimport MovieCard from '../components/MovieCard';\r\nimport { useMovie } from '../context/MovieContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport tmdb from '../api/tmdb';\r\nimport '../styles/Home.css'; // Import external CSS\r\n\r\nexport default function Home() {\r\n  const { movies, setMovies } = useMovie();\r\n  const { isAuthenticated, userName, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [filteredMovies, setFilteredMovies] = useState([]);\r\n  const [selectedGenre, setSelectedGenre] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchTrending = async () => {\r\n      try {\r\n        const res = await tmdb.get('/trending/movie/week');\r\n        setMovies(res.data.results);\r\n        setFilteredMovies(res.data.results);\r\n      } catch (err) {\r\n        console.error('Failed to fetch trending movies:', err);\r\n      }\r\n    };\r\n    fetchTrending();\r\n  }, [setMovies]);\r\n\r\n  useEffect(() => {\r\n    if (!selectedGenre) {\r\n      setFilteredMovies(movies);\r\n    } else {\r\n      setFilteredMovies(\r\n        movies.filter((movie) =>\r\n          movie.genre_ids.includes(Number(selectedGenre))\r\n        )\r\n      );\r\n    }\r\n  }, [selectedGenre, movies]);\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <div className=\"home-container\">\r\n      <Typography className=\"home-title\" variant=\"h4\">\r\n        Trending Movies\r\n      </Typography>\r\n\r\n      {isAuthenticated ? (\r\n        <Box className=\"user-info-bar\">\r\n          <Typography className=\"username\" variant=\"h6\">\r\n            Welcome, {userName}!\r\n          </Typography>\r\n          <Button className=\"logout-button\" onClick={handleLogout}>\r\n            Logout\r\n          </Button>\r\n        </Box>\r\n      ) : (\r\n        <Box className=\"auth-actions\">\r\n          <Button variant=\"contained\" onClick={() => navigate('/login')}>\r\n            Login\r\n          </Button>\r\n          <Button variant=\"outlined\" onClick={() => navigate('/register')}>\r\n            Sign Up\r\n          </Button>\r\n        </Box>\r\n      )}\r\n\r\n      <SearchBar />\r\n      <FilterBar onFilterChange={setSelectedGenre} />\r\n\r\n      <Grid container spacing={2}>\r\n        {filteredMovies.map((movie) => (\r\n          <MovieCard key={movie.id} movie={movie} />\r\n        ))}\r\n      </Grid>\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}