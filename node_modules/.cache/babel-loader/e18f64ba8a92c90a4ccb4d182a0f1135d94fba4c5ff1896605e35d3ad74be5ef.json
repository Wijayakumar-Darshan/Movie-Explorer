{"ast":null,"code":"// src/components/MovieCard.jsx\nimport React,{useState}from'react';import{Card,CardMedia,CardContent,Typography,IconButton,Tooltip,Dialog,DialogTitle,DialogContent,DialogActions,Button}from'@mui/material';import FavoriteIcon from'@mui/icons-material/Favorite';import{Link,useNavigate}from'react-router-dom';import{useMovie}from'../context/MovieContext';import{useAuth}from'../context/AuthContext';import'../styles/MovieCard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function MovieCard(_ref){var _movie$release_date;let{movie}=_ref;const{toggleFavorite,favorites}=useMovie();const{isAuthenticated}=useAuth();const isFav=favorites.some(m=>m.id===movie.id);const navigate=useNavigate();const[showLoginDialog,setShowLoginDialog]=useState(false);const handleFavoriteClick=e=>{e.preventDefault();// prevent navigation if inside <Link>\nif(!isAuthenticated){setShowLoginDialog(true);return;}toggleFavorite(movie);};const handleClose=()=>setShowLoginDialog(false);const goToLogin=()=>navigate('/login');const goToSignup=()=>navigate('/register');return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{sx:{width:200,margin:2},children:[/*#__PURE__*/_jsx(Link,{to:`/movie/${movie.id}`,style:{textDecoration:'none',color:'inherit'},children:/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"300\",image:`https://image.tmdb.org/t/p/w500${movie.poster_path}`,alt:movie.title})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,children:movie.title}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:(_movie$release_date=movie.release_date)===null||_movie$release_date===void 0?void 0:_movie$release_date.split('-')[0]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"\\u2B50 \",movie.vote_average]}),/*#__PURE__*/_jsx(Tooltip,{title:isAuthenticated?'Add to Favorites':'Login required',children:/*#__PURE__*/_jsx(IconButton,{onClick:handleFavoriteClick,\"aria-label\":isAuthenticated?\"Add to favorites\":\"Login to favorite\",children:/*#__PURE__*/_jsx(FavoriteIcon,{color:isFav?'error':'disabled'})})})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:showLoginDialog,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Login Required\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Typography,{children:\"You must be logged in to add favorites.\"})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:goToLogin,variant:\"contained\",children:\"Login\"}),/*#__PURE__*/_jsx(Button,{onClick:goToSignup,variant:\"outlined\",children:\"Sign Up\"})]})]})]});}","map":{"version":3,"names":["React","useState","Card","CardMedia","CardContent","Typography","IconButton","Tooltip","Dialog","DialogTitle","DialogContent","DialogActions","Button","FavoriteIcon","Link","useNavigate","useMovie","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MovieCard","_ref","_movie$release_date","movie","toggleFavorite","favorites","isAuthenticated","isFav","some","m","id","navigate","showLoginDialog","setShowLoginDialog","handleFavoriteClick","e","preventDefault","handleClose","goToLogin","goToSignup","children","sx","width","margin","to","style","textDecoration","color","component","height","image","poster_path","alt","title","variant","noWrap","release_date","split","vote_average","onClick","open","onClose"],"sources":["C:/Users/DARSHAN/Documents/Movie Explorer/movie-explorer/src/components/MovieCard.jsx"],"sourcesContent":["// src/components/MovieCard.jsx\r\nimport React, { useState } from 'react';\r\nimport {\r\n  Card,\r\n  CardMedia,\r\n  CardContent,\r\n  Typography,\r\n  IconButton,\r\n  Tooltip,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button\r\n} from '@mui/material';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useMovie } from '../context/MovieContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport '../styles/MovieCard.css';\r\n\r\nexport default function MovieCard({ movie }) {\r\n  const { toggleFavorite, favorites } = useMovie();\r\n  const { isAuthenticated } = useAuth();\r\n  const isFav = favorites.some((m) => m.id === movie.id);\r\n  const navigate = useNavigate();\r\n  const [showLoginDialog, setShowLoginDialog] = useState(false);\r\n\r\n  const handleFavoriteClick = (e) => {\r\n    e.preventDefault(); // prevent navigation if inside <Link>\r\n\r\n    if (!isAuthenticated) {\r\n      setShowLoginDialog(true);\r\n      return;\r\n    }\r\n\r\n    toggleFavorite(movie);\r\n  };\r\n\r\n  const handleClose = () => setShowLoginDialog(false);\r\n  const goToLogin = () => navigate('/login');\r\n  const goToSignup = () => navigate('/register');\r\n\r\n  return (\r\n    <>\r\n      <Card sx={{ width: 200, margin: 2 }}>\r\n        <Link to={`/movie/${movie.id}`} style={{ textDecoration: 'none', color: 'inherit' }}>\r\n          <CardMedia\r\n            component=\"img\"\r\n            height=\"300\"\r\n            image={`https://image.tmdb.org/t/p/w500${movie.poster_path}`}\r\n            alt={movie.title}\r\n          />\r\n        </Link>\r\n        <CardContent>\r\n          <Typography variant=\"h6\" noWrap>{movie.title}</Typography>\r\n          <Typography variant=\"body2\">{movie.release_date?.split('-')[0]}</Typography>\r\n          <Typography variant=\"body2\">‚≠ê {movie.vote_average}</Typography>\r\n\r\n          <Tooltip title={isAuthenticated ? 'Add to Favorites' : 'Login required'}>\r\n            <IconButton\r\n              onClick={handleFavoriteClick}\r\n              aria-label={isAuthenticated ? \"Add to favorites\" : \"Login to favorite\"}\r\n            >\r\n              <FavoriteIcon color={isFav ? 'error' : 'disabled'} />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Dialog open={showLoginDialog} onClose={handleClose}>\r\n        <DialogTitle>Login Required</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>You must be logged in to add favorites.</Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={goToLogin} variant=\"contained\">Login</Button>\r\n          <Button onClick={goToSignup} variant=\"outlined\">Sign Up</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}